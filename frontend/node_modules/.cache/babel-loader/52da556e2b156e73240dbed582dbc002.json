{"ast":null,"code":"import _toConsumableArray from \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/src/components/Messenger/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport ConversationList from '../ConversationList';\nimport MessageList from '../MessageList';\nimport './Messenger.css';\nimport axios from \"axios\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport * as SockJS from 'sockjs-client';\nimport webstomp from 'webstomp-client';\nimport { Client } from '@stomp/stompjs'; // const clientSocket = new W3CWebSocket('ws://localhost:8081');\n\nexport default function Messenger(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      allUsers = _useState2[0],\n      setAllUsers = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      chats = _useState4[0],\n      setChats = _useState4[1];\n\n  var _useState5 = useState(-1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentChatId = _useState6[0],\n      setCurrentChatId = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      messagesResponse = _useState8[0],\n      setMessagesResponse = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      authenticated = _useState10[0],\n      setAuth = _useState10[1];\n\n  useEffect(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            connect();\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  })), []);\n\n  var connect = function connect() {\n    var client = new Client();\n    client.configure({\n      brokerURL: 'ws://localhost:8081/stomp',\n      onConnect: function () {\n        var _onConnect = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  console.log('onConnect');\n                  client.subscribe('/topic/public', function (message) {\n                    return onAllUsersReceived(message);\n                  });\n                  client.subscribe('/topic/chats', function (message) {\n                    return onAllChatsReceived(message);\n                  });\n                  client.subscribe('/topic/messages', function (message) {\n                    return onAllMessagesReceived(message);\n                  });\n                  client.subscribe('/topic/users', function (message) {\n                    return onAllUsersReceived(message);\n                  });\n                  client.subscribe('/topic/newMessage', function (message) {\n                    return onNewMessageReceived(message);\n                  });\n\n                case 6:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function onConnect() {\n          return _onConnect.apply(this, arguments);\n        }\n\n        return onConnect;\n      }(),\n      // Helps during debugging, remove in production\n      debug: function debug(str) {\n        console.log(new Date(), str);\n      }\n    });\n    client.activate();\n  };\n\n  var onAllUsersReceived = function onAllUsersReceived(message) {\n    console.log(\"Users subscription response :\");\n\n    if (message.body) {\n      var users = JSON.parse(message.body);\n      setAllUsers(users);\n      console.log(users);\n    } else {\n      console.log(\"got empty message\");\n    }\n  };\n\n  var afterAuth =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.get(\"http://localhost:8081/actions/allUserChats\");\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    return function afterAuth() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onAllChatsReceived = function onAllChatsReceived(message) {\n    console.log(\"Chats subscription response :\");\n\n    if (message.body) {\n      console.log(JSON.parse(message.body));\n      var chatsResponse = Object.values(JSON.parse(message.body));\n      setChats(chatsResponse);\n\n      if (chatsResponse.length > 0) {\n        setCurrentChatId(chatsResponse[0].chatId); // axios.get(`http://localhost:8081/messages/getMessagesByChatId?chatId=${currentChatId}`).then();\n      }\n\n      console.log(chatsResponse);\n    } else {\n      console.log(\"got empty message\");\n    }\n  };\n\n  var onAllMessagesReceived = function onAllMessagesReceived(message) {\n    console.log(\"Messages subscription response :\");\n\n    if (message.body) {\n      console.log(JSON.parse(message.body));\n      var msgsResponse = Object.values(JSON.parse(message.body));\n      setMessagesResponse(msgsResponse);\n      console.log(msgsResponse);\n    } else {\n      console.log(\"got empty message\");\n    }\n  };\n\n  var onNewMessageReceived = function onNewMessageReceived(message) {\n    console.log(\"New message subscription response :\");\n\n    if (message.body) {\n      console.log(JSON.parse(message.body));\n      var msgResponse = Object.values(JSON.parse(message.body));\n      setMessagesResponse([].concat(_toConsumableArray(messagesResponse), [msgResponse[5]]));\n      console.log(msgResponse[5]);\n    } else {\n      console.log(\"got empty message\");\n    }\n  };\n\n  var onTestReceived = function onTestReceived(payload) {\n    console.log(\"test received\");\n    var message = JSON.parse(payload.body);\n    console.log(message);\n  };\n\n  var onMessagesReceived = function onMessagesReceived(payload) {\n    console.log(\"messages received\");\n    var message = JSON.parse(payload.body);\n    console.log(message);\n  };\n\n  var onChatsReceived = function onChatsReceived(payload) {\n    console.log(\"chats received\");\n    var message = JSON.parse(payload.body);\n    console.log(message);\n  };\n\n  var onUsersReceived = function onUsersReceived(payload) {\n    console.log(\"users received\");\n    var message = JSON.parse(payload.body);\n    console.log(message);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"messenger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"scrollable sidebar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick:\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setAuth(true);\n              _context4.next = 3;\n              return afterAuth();\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Authenticated?\"), React.createElement(ConversationList, {\n    allUsers: allUsers,\n    chats: chats,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"scrollable content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(MessageList, {\n    messages: messagesResponse,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/nikita/Projects/insa/web-socket-messenger/frontend/src/components/Messenger/index.js"],"names":["React","useEffect","useState","ConversationList","MessageList","axios","w3cwebsocket","W3CWebSocket","SockJS","webstomp","Client","Messenger","props","allUsers","setAllUsers","chats","setChats","currentChatId","setCurrentChatId","messagesResponse","setMessagesResponse","authenticated","setAuth","connect","client","configure","brokerURL","onConnect","console","log","subscribe","message","onAllUsersReceived","onAllChatsReceived","onAllMessagesReceived","onNewMessageReceived","debug","str","Date","activate","body","users","JSON","parse","afterAuth","get","chatsResponse","Object","values","length","chatId","msgsResponse","msgResponse","onTestReceived","payload","onMessagesReceived","onChatsReceived","onUsersReceived"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport ConversationList from '../ConversationList';\nimport MessageList from '../MessageList';\nimport './Messenger.css';\nimport axios from \"axios\";\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport * as SockJS from 'sockjs-client';\nimport webstomp from 'webstomp-client';\nimport { Client } from '@stomp/stompjs';\n// const clientSocket = new W3CWebSocket('ws://localhost:8081');\n\nexport default function Messenger(props) {\n\n    const [allUsers, setAllUsers] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [currentChatId, setCurrentChatId] = useState(-1);\n    const [messagesResponse, setMessagesResponse] = useState([]);\n    const [authenticated, setAuth] = useState(false);\n\n\n    useEffect(async () => {\n        connect();\n    },[])\n\n    const connect = () => {\n\n        let client = new Client();\n\n        client.configure({\n            brokerURL: 'ws://localhost:8081/stomp',\n            onConnect: async () => {\n                console.log('onConnect');\n\n                client.subscribe('/topic/public', message => onAllUsersReceived(message));\n                client.subscribe('/topic/chats', message => onAllChatsReceived(message));\n                client.subscribe('/topic/messages', message => onAllMessagesReceived(message));\n                client.subscribe('/topic/users', message => onAllUsersReceived(message));\n                client.subscribe('/topic/newMessage', message => onNewMessageReceived(message));\n\n            },\n            // Helps during debugging, remove in production\n            debug: (str) => {\n                console.log(new Date(), str);\n            }\n        });\n\n        client.activate();\n    }\n\n    const onAllUsersReceived = (message) => {\n        console.log(\"Users subscription response :\");\n        if (message.body) {\n            const users = JSON.parse(message.body);\n            setAllUsers(users);\n            console.log(users);\n        } else {\n            console.log(\"got empty message\");\n        }\n    }\n\n    const afterAuth = async () => {\n        // await axios.get(\"http://localhost:8081/actions/allUsers\");\n        await axios.get(\"http://localhost:8081/actions/allUserChats\");\n    }\n\n    const onAllChatsReceived = (message) => {\n        console.log(\"Chats subscription response :\");\n        if (message.body) {\n            console.log(JSON.parse(message.body))\n            const chatsResponse = Object.values(JSON.parse(message.body));\n            setChats(chatsResponse);\n            if (chatsResponse.length > 0) {\n                setCurrentChatId(chatsResponse[0].chatId);\n                // axios.get(`http://localhost:8081/messages/getMessagesByChatId?chatId=${currentChatId}`).then();\n            }\n            console.log(chatsResponse);\n        } else {\n            console.log(\"got empty message\");\n        }\n    }\n\n    const onAllMessagesReceived = (message) => {\n        console.log(\"Messages subscription response :\");\n        if (message.body) {\n            console.log(JSON.parse(message.body))\n            const msgsResponse = Object.values(JSON.parse(message.body));\n            setMessagesResponse(msgsResponse);\n            console.log(msgsResponse);\n        } else {\n            console.log(\"got empty message\");\n        }\n    }\n\n    const onNewMessageReceived = (message) => {\n        console.log(\"New message subscription response :\");\n        if (message.body) {\n            console.log(JSON.parse(message.body))\n            const msgResponse = Object.values(JSON.parse(message.body));\n            setMessagesResponse([...messagesResponse, ...[msgResponse[5]]]);\n            console.log(msgResponse[5]);\n        } else {\n            console.log(\"got empty message\");\n        }\n    }\n\n    const onTestReceived = (payload) => {\n        console.log(\"test received\");\n        var message = JSON.parse(payload.body);\n        console.log(message);\n    }\n\n    const onMessagesReceived = (payload) => {\n        console.log(\"messages received\");\n        var message = JSON.parse(payload.body);\n        console.log(message);\n    }\n\n    const onChatsReceived = (payload) => {\n        console.log(\"chats received\");\n        var message = JSON.parse(payload.body);\n        console.log(message);\n    }\n\n    const onUsersReceived = (payload) => {\n        console.log(\"users received\");\n        var message = JSON.parse(payload.body);\n        console.log(message);\n    }\n\n\n\n    return (\n        <div className=\"messenger\">\n\n            {/* <Toolbar\n          title=\"Messenger\"\n          leftItems={[\n            <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n          ]}\n          rightItems={[\n            <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n          ]}\n        /> */}\n\n            {/* <Toolbar\n          title=\"Conversation Title\"\n          rightItems={[\n            <ToolbarButton key=\"info\" icon=\"ion-ios-information-circle-outline\" />,\n            <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n            <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />\n          ]}\n        /> */}\n\n            <div className=\"scrollable sidebar\">\n                <button onClick={async () => {\n                    setAuth(true);\n                    await afterAuth();\n                }}>Authenticated?</button>\n\n                <ConversationList allUsers={allUsers} chats={chats}/>\n            </div>\n\n            <div className=\"scrollable content\">\n              <MessageList messages={messagesResponse}/>\n            </div>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}