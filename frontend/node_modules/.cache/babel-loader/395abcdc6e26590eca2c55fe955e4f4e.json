{"ast":null,"code":"var _jsxFileName = \"/Users/nikita/Projects/insa/web-socket-messenger/frontend/src/components/Messenger/index.js\";\nimport React from 'react';\nimport ConversationList from '../ConversationList';\nimport MessageList from '../MessageList';\nimport './Messenger.css';\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport * as SockJS from 'sockjs-client';\nimport * as Stomp from 'stompjs'; // const clientSocket = new W3CWebSocket('ws://localhost:8081');\n\nexport default function Messenger(props) {\n  var url = 'http://localhost:8081';\n  var options = {};\n  var sockjs = new SockJS(url,\n  /*_reserved*/\n  null, options);\n  var stompClient = Stomp.over(sockjs);\n  stompClient.connect({}, function (frame) {\n    console.log(\"Connected :- \" + frame);\n    stompClient.subscribe(\"/actions/messages\", function (notifications) {\n      alert(notifications);\n    });\n  }, function (error) {\n    alert(error);\n  });\n\n  sockjs.onopen = function () {\n    console.log('open');\n    sockjs.send('test'); //sock.send('test');\n\n    sockjs.send(JSON.stringify({\n      name: 'Test User',\n      message: 'This is a hard-coded test'\n    })); //sockjs.close();\n  };\n  /*  NB: Moved into App\n  sockjs.onmessage = function(e) {\n      console.log('message', e.data);\n  }; //*/\n\n\n  sockjs.onclose = function () {\n    console.log('close');\n  }; //\n  // clientSocket.onopen = function(e) {\n  //     console.log(\"[open] WebSocket connection established\");\n  // };\n  //\n  // clientSocket.onmessage = function(event) {\n  //     alert(`Data received from server: ${event.data}`);\n  // };\n  //\n  // clientSocket.onclose = function(event) {\n  //     if (event.wasClean) {\n  //         alert(`[close] Connection was closed properly, code=${event.code} cause=${event.reason}`);\n  //     } else {\n  //\n  //         alert('[close] Connection interrupted');\n  //     }\n  // };\n  //\n  // clientSocket.onerror = function(error) {\n  //     alert(`[error] ${error.message}`);\n  // };\n\n\n  return React.createElement(\"div\", {\n    className: \"messenger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"scrollable sidebar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(ConversationList, {\n    wsClient: sockjs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"scrollable content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(MessageList, {\n    wsClient: sockjs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/nikita/Projects/insa/web-socket-messenger/frontend/src/components/Messenger/index.js"],"names":["React","ConversationList","MessageList","w3cwebsocket","W3CWebSocket","SockJS","Stomp","Messenger","props","url","options","sockjs","stompClient","over","connect","frame","console","log","subscribe","notifications","alert","error","onopen","send","JSON","stringify","name","message","onclose"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAO,iBAAP;AACA,SAASC,YAAY,IAAIC,YAAzB,QAA6C,WAA7C;AACA,OAAO,KAAKC,MAAZ,MAAwB,eAAxB;AACA,OAAO,KAAKC,KAAZ,MAAuB,SAAvB,C,CAEA;;AAEA,eAAe,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAErC,MAAIC,GAAG,GAAG,uBAAV;AACA,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,MAAM,GAAG,IAAIN,MAAJ,CAAWI,GAAX;AAAgB;AAAa,MAA7B,EAAmCC,OAAnC,CAAb;AACA,MAAIE,WAAW,GAAGN,KAAK,CAACO,IAAN,CAAWF,MAAX,CAAlB;AACAC,EAAAA,WAAW,CAACE,OAAZ,CAAoB,EAApB,EAAwB,UAAUC,KAAV,EAAiB;AACrCC,IAAAA,OAAO,CAACC,GAAR,CAAa,kBAAgBF,KAA7B;AACAH,IAAAA,WAAW,CAACM,SAAZ,CAAsB,mBAAtB,EAA2C,UAAUC,aAAV,EAA0B;AACjEC,MAAAA,KAAK,CAAED,aAAF,CAAL;AACH,KAFD;AAGH,GALD,EAKG,UAAUE,KAAV,EAAkB;AACjBD,IAAAA,KAAK,CAAEC,KAAF,CAAL;AACH,GAPD;;AASAV,EAAAA,MAAM,CAACW,MAAP,GAAgB,YAAW;AACvBN,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAN,IAAAA,MAAM,CAACY,IAAP,CAAY,MAAZ,EAFuB,CAGvB;;AACAZ,IAAAA,MAAM,CAACY,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAe;AAAEC,MAAAA,IAAI,EAAE,WAAR;AAAqBC,MAAAA,OAAO,EAAE;AAA9B,KAAf,CAAZ,EAJuB,CAKvB;AACH,GAND;AAOA;;;;;;AAIAhB,EAAAA,MAAM,CAACiB,OAAP,GAAiB,YAAW;AACxBZ,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,GAFD,CA1BqC,CA8BrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAqBE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,gBAAD;AAAkB,IAAA,QAAQ,EAAEN,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CArBF,EAyBE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD;AAAa,IAAA,QAAQ,EAAEA,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAzBF,CADF;AA+BH","sourcesContent":["import React from 'react';\nimport ConversationList from '../ConversationList';\nimport MessageList from '../MessageList';\nimport './Messenger.css';\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport * as SockJS from 'sockjs-client';\nimport * as Stomp from 'stompjs';\n\n// const clientSocket = new W3CWebSocket('ws://localhost:8081');\n\nexport default function Messenger(props) {\n\n    let url = 'http://localhost:8081';\n    let options = {};\n    let sockjs = new SockJS(url, /*_reserved*/null, options);\n    let stompClient = Stomp.over(sockjs);\n    stompClient.connect({}, function( frame ){\n        console.log( \"Connected :- \"+frame );\n        stompClient.subscribe(\"/actions/messages\", function( notifications ) {\n            alert( notifications );\n        });\n    }, function( error ) {\n        alert( error );\n    });\n\n    sockjs.onopen = function() {\n        console.log('open');\n        sockjs.send('test');\n        //sock.send('test');\n        sockjs.send(JSON.stringify({ name: 'Test User', message: 'This is a hard-coded test'}));\n        //sockjs.close();\n    };\n    /*  NB: Moved into App\n    sockjs.onmessage = function(e) {\n        console.log('message', e.data);\n    }; //*/\n    sockjs.onclose = function() {\n        console.log('close');\n    };\n\n    //\n    // clientSocket.onopen = function(e) {\n    //     console.log(\"[open] WebSocket connection established\");\n    // };\n    //\n    // clientSocket.onmessage = function(event) {\n    //     alert(`Data received from server: ${event.data}`);\n    // };\n    //\n    // clientSocket.onclose = function(event) {\n    //     if (event.wasClean) {\n    //         alert(`[close] Connection was closed properly, code=${event.code} cause=${event.reason}`);\n    //     } else {\n    //\n    //         alert('[close] Connection interrupted');\n    //     }\n    // };\n    //\n    // clientSocket.onerror = function(error) {\n    //     alert(`[error] ${error.message}`);\n    // };\n\n    return (\n      <div className=\"messenger\">\n\n          {/* <Toolbar\n          title=\"Messenger\"\n          leftItems={[\n            <ToolbarButton key=\"cog\" icon=\"ion-ios-cog\" />\n          ]}\n          rightItems={[\n            <ToolbarButton key=\"add\" icon=\"ion-ios-add-circle-outline\" />\n          ]}\n        /> */}\n\n        {/* <Toolbar\n          title=\"Conversation Title\"\n          rightItems={[\n            <ToolbarButton key=\"info\" icon=\"ion-ios-information-circle-outline\" />,\n            <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n            <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />\n          ]}\n        /> */}\n\n        <div className=\"scrollable sidebar\">\n          <ConversationList wsClient={sockjs}/>\n        </div>\n\n        <div className=\"scrollable content\">\n          <MessageList wsClient={sockjs}/>\n        </div>\n      </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}