{"ast":null,"code":"/**\n * @internal\n */\nexport function augmentWebsocket(webSocket, debug) {\n  webSocket.terminate = function () {\n    var noOp = function noOp() {}; // set all callbacks to no op\n\n\n    this.onerror = noOp;\n    this.onmessage = noOp;\n    this.onopen = noOp;\n    var ts = new Date();\n    var origOnClose = this.onclose; // Track delay in actual closure of the socket\n\n    this.onclose = function (closeEvent) {\n      var delay = new Date().getTime() - ts.getTime();\n      debug(\"Discarded socket closed after \".concat(delay, \"ms, with code/reason: \").concat(closeEvent.code, \"/\").concat(closeEvent.reason));\n    };\n\n    this.close();\n    origOnClose.call(this, {\n      code: 4001,\n      reason: 'Heartbeat failure, discarding the socket',\n      wasClean: false\n    });\n  };\n}","map":null,"metadata":{},"sourceType":"module"}